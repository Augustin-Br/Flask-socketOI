<!-- Selection des joueurs -->


<p id="player1">Player 1 : </p>
<p id="score1">Score : </p>

<input type="button" value="Ready Player 1" onclick="socket.emit('readyPlayer1');">

<p id="player2">Player 2 : </p>
<p id="score2">Score : </p>

<input type="button" value="Ready Player 2" onclick="socket.emit('readyPlayer2');">

<script>
    var socket = io();

    socket.emit('connexion_serveur');

    socket.on('statuGame', function (data) {
        console.log("message reçu", data.player1Info, data.player2Info);
        document.getElementById('player1').innerHTML = "Player 1 : " + data.player1Info['username'];
        document.getElementById('player2').innerHTML = "Player 2 : " + data.player2Info['username'];
    });

    socket.on('gameInfo', function (gameData) {
        console.log(gameData.score);
        document.getElementById('score1').innerHTML = "Score : " + gameData.score[0];
        document.getElementById('score2').innerHTML = "Score : " + gameData.score[1];
    });
</script>

<!-- Gestion du jeu -->
<div id="area">

    <script>
        //Gestion de la zone du jeu
        var area = document.getElementById('area');

        socket.on('gameInfo', function (gameData) {
            //console.log(gameData.gameArea);

            area.style.width = gameData.gameArea[2][1][1] + 'px';
            area.style.height = gameData.gameArea[0][0][1] + 'px';
        });
    </script>


    <div id="ball"></div>

    <script>
        //Gestion de la ball

        var ball = document.getElementById('ball');

        socket.on('gameInfo', function (data) {
            //console.log(data.ballPos[0], data.ballPos[0]);



            ball.style.left = data.ballPos[0] + 'px';
            ball.style.top = data.ballPos[1] + 'px';

        });
    </script>


    <div id="raquetteJ2">
        <script>
            //Gestion de la raquette du joueur 2 ( à gauche )
            var raquetteJ2 = document.getElementById('raquetteJ2')

            socket.on('gameInfo', function (gameData) {
                //console.log(gameData.raquettes[1]);

                //gestion de la taille
                raquetteJ2.style.width = gameData.raquettes[0][0][1] - gameData.raquettes[0][0][0] + 'px';
                raquetteJ2.style.height = gameData.raquettes[0][1][1] - gameData.raquettes[0][1][0] + 'px';

                //gestion de la position
                raquetteJ2.style.left = gameData.raquettes[0][0][1] + 'px';
                raquetteJ2.style.top = gameData.raquettes[0][1][0] + 'px';



            });
        </script>
    </div>


    <div id="raquetteJ1">
        <script>
            //Gestion de la raquette du joueur 1 ( à droite )
            var raquetteJ1 = document.getElementById('raquetteJ1')

            socket.on('gameInfo', function (gameData) {
                //console.log(gameData.raquettes[0]);

                //gestion de la taille
                raquetteJ1.style.width = gameData.raquettes[1][0][1] - gameData.raquettes[1][0][0] + 'px';
                raquetteJ1.style.height = gameData.raquettes[1][1][1] - gameData.raquettes[1][1][0] + 'px';


                //gestion de la position
                raquetteJ1.style.left = gameData.raquettes[1][0][1] + 'px';
                raquetteJ1.style.top = gameData.raquettes[1][1][0] + 'px';
            });
        </script>
    </div>

    <script>
        //Gestion de l'envoie de l'action ( <- ou -> ) pour déplacer la raquette

        document.addEventListener('keydown', raqettePosition);

        function raqettePosition(e) {

            console.log(e.code);

            if (e.code == "ArrowLeft") {
                socket.emit('ArrowLeft');
            } else if (e.code == "ArrowRight") {
                socket.emit('ArrowRight');
            }

        }
    </script>
</div>